

<div class="container" style="overflow: scroll; height: 80px">

  <div class="d-flex">
    <h3 class="me-3"> <%= @sum_of_expenses%> â‚¬</h3>
    <!-- Button trigger modal Create expenses -->
    <button type="button" class="btn btn-add" data-bs-toggle="modal" data-bs-target="#ModalExpensesCreate">
      +
    </button>
    <!-- Button trigger modal Show expenses -->
    <button type="button" class="btn btn-light btn-sm" data-bs-toggle="modal" data-bs-target="#ModalExpensesDetails">
      Details
    </button>
  </div>
  <p><%= @total_per_participant %> / participant</p>


  <!-- Modal Show Expenses -->
  <div class="modal fade" id="ModalExpensesDetails" tabindex="-1" aria-labelledby="ModalExpensesDetailsLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="ModalExpensesDetailsLabel">Expenses</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <h2 class="title mb-3"><%= @total_per_participant %> / participant</h2>

          <div class="card">
            <ul class="list-group list-group-flush">
              <% @details_expenses.each do |expense| %>
                <li class="list-group-item py-4">
                  <div class="container">
                    <div class="d-flex justify-content-between">
                      <h6><%= expense.title %></h6>
                      <h6 class="ms-5"><%= expense.amount %>â‚¬</h6>
                    </div>
                    <div class="d-flex justify-content-between">
                      <p><%= expense.participant.user.username %> paid</p>
                      <p><%= expense.amount / @participants_expenses.count %> / participant</p>
                    </div>

                    <div>
                      <!-- Button trigger edit expense -->
                        <button type="button" class="btn btn-light btn-sm" data-bs-toggle="modal" data-bs-target="#ModalExpensesEdit-<%= expense.id %>">
                          <i class="fas fa-edit"></i>
                        </button>
                      <!-- button delete expense -->
                      <%= link_to expense_path(expense), method: :delete, data: { confirm: "Are you sure?" } do %>
                        <i class="fas fa-times"></i>
                      <% end %>
                    </div>

                  </div>
                </li>
              <% end %>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>




  <!-- Modal Create expenses -->
  <div class="modal fade" id="ModalExpensesCreate" tabindex="-1" aria-labelledby="ModalExpensesCreateLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="ModalExpensesCreateLabel">Add an expense</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <%= simple_form_for [@participant, @new_expense] do |f| %>
            <%= f.input :title %>
            <%= f.input :amount %>
            <%= f.submit "add an expense", class: "btn btn-primary" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal edit expense-->
  <% @details_expenses.each do |expense|  %>
  <div class="modal fade" id="ModalExpensesEdit-<%= expense.id %>" tabindex="-1" aria-labelledby="ModalExpensesEditLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="ModalExpensesEditLabel">Edit expense</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <%= simple_form_for(expense) do |f| %>
            <%= f.input :title %>
            <%= f.input :amount %>
            <%= f.submit %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <% end %>

</div>
